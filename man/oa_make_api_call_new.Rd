% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/openalex_new.R
\name{oa_make_api_call_new}
\alias{oa_make_api_call_new}
\title{Make OpenAlex API call using httr2}
\usage{
oa_make_api_call_new(
  url,
  method = "GET",
  query = NULL,
  body = NULL,
  as_req = FALSE
)
}
\arguments{
\item{url}{API endpoint URL}

\item{method}{HTTP method (default "GET")}

\item{query}{Named list of query parameters to include in the URL}

\item{body}{Request body (for POST requests)}

\item{as_req}{If TRUE, return httr2 request object instead of performing request}
}
\value{
If \code{as_req = FALSE}, returns parsed JSON response. If \code{as_req = TRUE},
returns httr2 request object for use with \code{httr2::req_perform_parallel()}.
}
\description{
This function creates and executes HTTP requests to the OpenAlex API using
httr2. It includes automatic retry logic, proper user agent configuration,
and support for API keys. Can return either the response data or the
request object for use in parallel processing.
}
\details{
The function automatically includes:
\itemize{
\item User agent string with package name and email (if configured)
\item API key from \code{getOption("bibliobutler.openalex_key")} if available
\item 30-second timeout
\item Retry logic (3 attempts with exponential backoff)
\item Debug logging when \code{getOption("bibliobutler.dev_mode")} is TRUE
}
}
\keyword{internal}
